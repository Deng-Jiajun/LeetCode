/*
 * @lc app=leetcode.cn id=7 lang=c
 *
 * [7] æ•´æ•°åè½¬
 *
 * https://leetcode-cn.com/problems/reverse-integer/description/
 *
 * algorithms
 * Medium (35.17%)
 * Likes:    3431
 * Dislikes: 0
 * Total Accepted:    968.4K
 * Total Submissions: 2.8M
 * Testcase Example:  '123'
 *
 * ç»™ä½ ä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•° x ï¼Œè¿”å›å°† x ä¸­çš„æ•°å­—éƒ¨åˆ†åè½¬åçš„ç»“æœã€‚
 *
 * å¦‚æœåè½¬åæ•´æ•°è¶…è¿‡ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°çš„èŒƒå›´Â [âˆ’2^31,Â  2^31Â âˆ’ 1] ï¼Œå°±è¿”å› 0ã€‚
 * å‡è®¾ç¯å¢ƒä¸å…è®¸å­˜å‚¨ 64 ä½æ•´æ•°ï¼ˆæœ‰ç¬¦å·æˆ–æ— ç¬¦å·ï¼‰ã€‚
 *
 *
 *
 * ç¤ºä¾‹ 1ï¼š
 *
 *
 * è¾“å…¥ï¼šx = 123
 * è¾“å‡ºï¼š321
 *
 *
 * ç¤ºä¾‹ 2ï¼š
 *
 *
 * è¾“å…¥ï¼šx = -123
 * è¾“å‡ºï¼š-321
 *
 *
 * ç¤ºä¾‹ 3ï¼š
 *
 *
 * è¾“å…¥ï¼šx = 120
 * è¾“å‡ºï¼š21
 *
 *
 * ç¤ºä¾‹ 4ï¼š
 *
 *
 * è¾“å…¥ï¼šx = 0
 * è¾“å‡ºï¼š0
 *
 *
 *
 *
 * æç¤ºï¼š
 *
 *
 * -2^31
 *
 *
 */

// @lc code=start

// å†™åˆ°ä¸€åŠæŠŠè‡ªå·±å†™è‡ªé—­äº†ï¼Œè¿™å­—ç¬¦ä¸²å¤ªéº»çƒ¦äº†ğŸ˜«

// åˆ¤æ–­ç»™å®šçš„è¿™ä¸ªå­—ç¬¦ä¸²ä»£è¡¨çš„æ•°å­—æœ‰æ²¡æœ‰æº¢å‡º
bool isOverflow(char *num)
{
    // æ•°å­—è‡³å°‘æœ‰ä¸€ä½ï¼Œä¸éœ€è¦åˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºä¸²

    // å¦‚æœæ˜¯è´Ÿæ•°ï¼Œè€Œä¸”é•¿åº¦æ˜¯12
    if (num[0] == '-' && strlen(num) == 11)
    {
        if (strcmp(num, "-2147483648") > 0)
            return true;
    }
    else if (num[0] != '-' && strlen(num) == 10) // å¦‚æœæ˜¯æ­£æ•°ï¼Œè€Œä¸”é•¿åº¦æ˜¯11
    {
        if (strcmp(num, "2147483647") > 0)
            return true;
    }

    return false;
}

// intè½¬å­—ç¬¦ä¸²ï¼ˆé¡ºä¾¿åè½¬ï¼‰
void intToString_AndReverse(int number, char *string)
{

    int index = 0; // ä¸‹æ ‡ï¼Œå…¼æ•°å­—é•¿åº¦

    // è´Ÿæ•°çš„è¯åŠ ä¸ªç¬¦å·ï¼Œé¡ºä¾¿ä¸‹æ ‡æ¨è¿›ä¸€ä½
    if (number < 0)
    {
        index = 1;
        string[0] = '-';
    }

    // å­—ç¬¦ä¸²åè½¬
    if (number < 0) // è´Ÿæ•°
    {
        while (number != 0)
        {
            string[index++] = -1 * (number % 10) + '0';
            number /= 10;
        }
    }
    else // æ­£æ•°
    {
        while (number != 0)
        {
            string[index++] = (number % 10) + '0';
            number /= 10;
        }
    }
}

// å­—ç¬¦ä¸²è½¬int
int stringToInt(const char *string)
{
    // æ•°å­—è‡³å°‘æœ‰ä¸€ä½ï¼Œä¸éœ€è¦åˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºä¸²

    int index = 0; // ç›®å‰éå†åˆ°çš„ä¸‹æ ‡

    int result = 0; // è¿ç®—ç»“æœ

    /*
     æœ¬æ¥æ‰“ç®—æ­£è´Ÿå·ä¸€èµ·å¤„ç†ï¼Œè´Ÿæ•°æœ€åä¹˜ä¸ª -1 å°±å®Œäº‹äº†
     ç„¶åååº”è¿‡æ¥è´Ÿæ•°æ¯”æ•´æ•°èŒƒå›´å¤š 1ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾—åˆ†åˆ«å¤„ç†
     ï¼ˆæˆ–è€…å•ç‹¬åˆ¤æ–­è´Ÿæ•°æ˜¯ä¸æ˜¯ "-2147483648"ï¼Œ
       ä¸è¿‡åˆ†åˆ«å¤„ç†æ­£è´Ÿæ•°åº”è¯¥æ¯”æ¯æ¬¡éƒ½åˆ¤æ–­æ˜¯ä¸æ˜¯ "-2147483648" å¿«ä¸€ç‚¹ï¼Œå§ï¼Ÿ)
    */

    // å¦‚æœæ˜¯è´Ÿæ•°ï¼Œè·³è¿‡è´Ÿå·
    if (string[0] == '-')
    {
        index = 1;
        while (index != strlen(string))
        {
            result = result * 10 - (string[index++] - '0');
        }
    }
    else // strå¦‚æœæ˜¯æ­£æ•°
    {
        while (index != strlen(string))
        {
            result = result * 10 + (string[index++] - '0');
        }
    }
    return result;
}

int reverse(int x)
{
    // è¿™é¢˜çš„è¦ç‚¹æ˜¯æº¢å‡ºåˆ¤æ–­ï¼Œåè½¬å±äºåŸºæœ¬æ“ä½œ

    // -2^31 = -2147483648
    // 2^31 -1 = 2147483647

    // 0 å°±ç›´æ¥è¿”å› 0 å§ï¼Œä¸æƒ³åœ¨åˆ«çš„åœ°æ–¹æé›¶å€¼åˆ¤æ–­äº†
    if (x == 0)
        return 0;

    char num[12] = "0"; // æœ€é•¿10ä½ï¼ŒåŠ ä¸Šè´Ÿå·å’Œ'\0'ï¼Œæ‹¢å…±12ä½
    intToString_AndReverse(x, num);

    if (isOverflow(num))
        return 0;
    else
        return stringToInt(num);
}
// @lc code=end
